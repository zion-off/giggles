---
title: Input
description: API reference for the input system
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

The input system routes keyboard events to focused components and prevents input leaking.

```tsx title="Basic Usage"
import { useKeybindings, useFocus } from 'giggles';
import { useState } from 'react';
import { Box, Text } from 'ink';

function FileList() {
  const focus = useFocus();
  const [selected, setSelected] = useState(0);
  const files = ['file1.ts', 'file2.ts', 'file3.ts'];

  useKeybindings(focus, {
    j: () => setSelected((i) => Math.min(files.length - 1, i + 1)),
    k: () => setSelected((i) => Math.max(0, i - 1)),
  });

  return (
    <Box flexDirection="column">
      {files.map((file, i) => (
        <Text key={file} color={i === selected ? 'green' : 'white'}>
          {i === selected ? '> ' : '  '}
          {file}
        </Text>
      ))}
    </Box>
  );
}
```

## API Reference

### useKeybindings()

Registers keybindings that only fire when the component is focused.

```ts title="Type Signature"
function useKeybindings(
  focus: { id: string },
  bindings: Keybindings,
  options?: KeybindingOptions
): void
```

**Parameters:**

<TypeTable
  type={{
    focus: {
      description: 'Focus handle from useFocus()',
      type: '{ id: string }',
    },
    bindings: {
      description: 'Map of key names to handler functions',
      type: 'Keybindings',
    },
    options: {
      description: 'Optional configuration for capture mode and layers',
      type: 'KeybindingOptions',
    },
  }}
/>

#### KeyHandler

Handler function for a key binding.

```ts title="Type Signature"
type KeyHandler = (input: string, key: Key) => void
```

<TypeTable
  type={{
    input: {
      description: 'The character string for the key pressed',
      type: 'string',
    },
    key: {
      description: 'Ink Key object with boolean properties (downArrow, return, escape, etc.)',
      type: 'Key',
    },
  }}
/>

#### Keybindings

<TypeTable
  type={{
    '[key: string]': {
      description: 'Key name (e.g., "j", "enter", "ctrl+c") mapped to handler function',
      type: 'KeyHandler',
    },
  }}
/>

#### KeybindingOptions

<TypeTable
  type={{
    capture: {
      description: 'Enable capture mode - all keystrokes go to onKeypress, nothing bubbles',
      type: 'boolean',
      default: 'false',
    },
    onKeypress: {
      description: 'Handler for keystrokes in capture mode that don\'t match explicit bindings',
      type: '(input: string, key: Key) => void',
    },
    layer: {
      description: 'Optional layer identifier for organizing keybindings (metadata only)',
      type: 'string',
    },
  }}
/>

### FocusTrap

Stops input bubbling at a boundary. Used for modals and dialogs.

```tsx title="FocusTrap Example"
function App() {
  const [showModal, setShowModal] = useState(false);

  return (
    <>
      <MainContent />
      {showModal && (
        <FocusTrap>
          <Modal onClose={() => setShowModal(false)} />
        </FocusTrap>
      )}
    </>
  );
}
```

<TypeTable
  type={{
    children: {
      description: 'Components that should trap input',
      type: 'React.ReactNode',
    },
  }}
/>

### Key Names

Supported key names for bindings:

- **Special keys**: `enter`, `escape`, `tab`, `backspace`, `delete`, `up`, `down`, `left`, `right`, `pageup`, `pagedown`, `home`, `end`
- **Character keys**: `a`, `b`, `j`, `k`, `?`, etc.
- **Modified keys**: `ctrl+c`, `ctrl+q`, etc.

Key normalization handles variants like `ctrl+c`, `Ctrl-C`, `^c` automatically.
